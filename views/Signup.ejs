<%- include("partials/header") %>

    <section class="auth-page">
        <div class="auth-container">
            <div class="auth-layout">

                <!-- Left Branding Panel -->
                <div class="auth-branding">
                    <div class="auth-branding-content">
                        <div class="auth-logo">
                            <img src="/logo5 (1).png" alt="IndiaKart" onerror="this.style.display='none'">
                            <h2>IndiaKart</h2>
                        </div>
                        <h1>Join Our Community For Updates</h1>
                        <p>Create your account and start enjoying premium products with exclusive member benefits.</p>

                        <div class="auth-features">
                            <div class="auth-feature"><i class="fas fa-tag"></i><span>Exclusive member discounts</span>
                            </div>
                            <div class="auth-feature"><i class="fas fa-bolt"></i><span>Fast checkout experience</span>
                            </div>
                            <div class="auth-feature"><i class="fas fa-map-marker-alt"></i><span>Order tracking &
                                    history</span></div>
                            <div class="auth-feature"><i class="fas fa-star"></i><span>Personalized
                                    recommendations</span></div>
                            <div class="auth-feature"><i class="fas fa-star"></i><span>Easy to Order</span></div>
                        </div>

                        <div class="auth-stats">
                            <div class="auth-stat">
                                <h3>10K+ Active</h3>
                                <p>Customers</p>
                            </div>
                            <div class="auth-stat">
                                <h3>5K+ Variety of</h3>
                                <p>Products</p>
                            </div>
                            <div class="auth-stat">
                                <h3>4.8/5</h3>
                                <p>Rating</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Form Panel -->
                <div class="auth-form-section">
                    <div class="auth-form-container">

                        <div class="auth-header">
                            <h2>Create Account</h2>
                            <p>Sign up to get started with IndiaKart</p>
                        </div>

                        <!-- Error Banner -->
                        <% if (typeof error !=='undefined' && error) { %>
                            <div class="auth-error-banner">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= error %>
                            </div>
                            <% } %>

                                <!-- Social Signup -->
                                <div class="social-auth">
                                    <button class="social-btn google-btn" type="button">
                                        <i class="fab fa-google"></i> <span>Continue with Google</span>
                                    </button>
                                    <button class="social-btn facebook-btn" type="button">
                                        <i class="fab fa-facebook-f"></i> <span>Continue with Facebook</span>
                                    </button>
                                </div>

                                <div class="auth-divider"><span>or sign up with email</span></div>

                                <!-- Signup Form -->
                                <form class="auth-form" id="signupForm" action="/signup" method="POST" novalidate>

                                    <div class="form-group">
                                        <label for="fullName"><i class="fas fa-user"></i> Full Name</label>
                                        <input type="text" id="fullName" name="name" placeholder="John Doe" required
                                            autocomplete="name">
                                        <span class="form-error" id="nameError"></span>
                                    </div>

                                    <div class="form-group">
                                        <label for="signupEmail"><i class="fas fa-envelope"></i> Email Address</label>
                                        <input type="email" id="signupEmail" name="email" placeholder="john@example.com"
                                            required autocomplete="email">
                                        <span class="form-error" id="emailError"></span>
                                    </div>

                                    <div class="form-group">
                                        <label for="signupPhone"><i class="fas fa-phone"></i> Phone Number</label>
                                        <input type="tel" id="signupPhone" name="phone" placeholder="+91 98765 43210"
                                            autocomplete="tel">
                                    </div>

                                    <div class="form-group">
                                        <label for="password"><i class="fas fa-lock"></i> Password</label>
                                        <div class="password-input-wrapper">
                                            <input type="password" id="password" name="password"
                                                placeholder="Create a strong password" required
                                                autocomplete="new-password">
                                            <button type="button" class="password-toggle" id="togglePassword"
                                                aria-label="Toggle password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-strength" id="passwordStrength">
                                            <div class="strength-bar">
                                                <div class="strength-fill"></div>
                                            </div>
                                            <span class="strength-text"></span>
                                        </div>
                                        <span class="form-error" id="passwordError"></span>
                                    </div>

                                    <div class="form-group">
                                        <label for="confirmPassword"><i class="fas fa-lock"></i> Confirm
                                            Password</label>
                                        <div class="password-input-wrapper">
                                            <input type="password" id="confirmPassword" name="confirmPassword"
                                                placeholder="Re-enter your password" required
                                                autocomplete="new-password">
                                            <button type="button" class="password-toggle" id="toggleConfirmPassword"
                                                aria-label="Toggle confirm password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <span class="form-error" id="confirmPasswordError"></span>
                                    </div>

                                    <div class="form-group checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="terms" required>
                                            <span class="checkbox-custom"></span>
                                            <span class="checkbox-text">I agree to the <a href="#">Terms of Service</a>
                                                and <a href="#">Privacy Policy</a></span>
                                        </label>
                                    </div>

                                    <div class="form-group checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="newsletter" name="newsletter">
                                            <span class="checkbox-custom"></span>
                                            <span class="checkbox-text">Send me deals, offers & updates</span>
                                        </label>
                                    </div>

                                    <button type="submit" class="btn btn-primary btn-full">
                                        <span>Create Account</span> <i class="fas fa-arrow-right"></i>
                                    </button>

                                </form>

                                <div class="auth-footer">
                                    <p>Already have an account? <a href="/login" class="auth-link">Sign In</a></p>
                                </div>

                                <div class="secure-notice">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Your data is secure and encrypted</span>
                                </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Modal -->
    <div class="modal" id="signupSuccessModal">
        <div class="modal-content">
            <button class="modal-close" id="modalCloseSignup"><i class="fas fa-times"></i></button>
            <div class="modal-header">
                <i class="fas fa-check-circle" style="color:var(--success)!important;"></i>
                <h2>Welcome to IndiaKart!</h2>
            </div>
            <div class="modal-body">
                <p>Your account has been created successfully. Start shopping now and enjoy exclusive benefits!</p>
            </div>
            <div class="modal-footer">
                <a href="/products" class="btn btn-primary"><i class="fas fa-shopping-bag"></i> Start Shopping</a>
            </div>
        </div>
    </div>

    <%- include("partials/footer") %>

        <script>
            // Password toggle
            document.getElementById('togglePassword').addEventListener('click', function () {
                const input = document.getElementById('password');
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.replace('fa-eye', 'fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.replace('fa-eye-slash', 'fa-eye');
                }
            });

            // Confirm password toggle
            document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
                const input = document.getElementById('confirmPassword');
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.replace('fa-eye', 'fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.replace('fa-eye-slash', 'fa-eye');
                }
            });

            // Password strength checker
            document.getElementById('password').addEventListener('input', function () {
                const val = this.value;
                const fill = document.querySelector('.strength-fill');
                const text = document.querySelector('.strength-text');
                let strength = 0;

                if (val.length >= 6) strength++;
                if (val.match(/[A-Z]/)) strength++;
                if (val.match(/[0-9]/)) strength++;
                if (val.match(/[^A-Za-z0-9]/)) strength++;

                const levels = ['', 'Weak', 'Fair', 'Good', 'Strong'];
                const colors = ['', '#dc3545', '#ffc107', '#17a2b8', '#28a745'];
                const widths = ['0%', '25%', '50%', '75%', '100%'];

                fill.style.width = widths[strength];
                fill.style.background = colors[strength];
                text.textContent = val.length > 0 ? levels[strength] : '';
                text.style.color = colors[strength];
            });

            // Form validation
            document.getElementById('signupForm').addEventListener('submit', function (e) {
                let valid = true;

                const name = document.getElementById('fullName');
                const email = document.getElementById('signupEmail');
                const password = document.getElementById('password');
                const confirmPassword = document.getElementById('confirmPassword');
                const terms = document.getElementById('terms');

                document.getElementById('nameError').textContent = '';
                document.getElementById('emailError').textContent = '';
                document.getElementById('passwordError').textContent = '';
                document.getElementById('confirmPasswordError').textContent = '';

                if (!name.value.trim()) {
                    document.getElementById('nameError').textContent = 'Full name is required.';
                    valid = false;
                }

                if (!email.value || !email.value.includes('@')) {
                    document.getElementById('emailError').textContent = 'Please enter a valid email.';
                    valid = false;
                }

                if (!password.value || password.value.length < 6) {
                    document.getElementById('passwordError').textContent = 'Password must be at least 6 characters.';
                    valid = false;
                }

                if (password.value !== confirmPassword.value) {
                    document.getElementById('confirmPasswordError').textContent = 'Passwords do not match.';
                    valid = false;
                }

                if (!terms.checked) {
                    alert('Please agree to the Terms of Service.');
                    valid = false;
                }

                if (!valid) e.preventDefault();
            });
        </script>