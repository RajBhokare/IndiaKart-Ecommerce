<%- include("partials/header") %>

    <section class="auth-page">
        <div class="auth-container">
            <div class="auth-layout">

                <!-- Left Branding Panel -->
                <div class="auth-branding">
                    <div class="auth-branding-content">
                        <div class="auth-logo">
                            <img src="/logo5 (1).png" alt="IndiaKart" onerror="this.style.display='none'">
                            <h2>IndiaKart</h2>
                        </div>
                        <h1>Welcome Back!</h1>
                        <p>Sign in to your account and continue enjoying premium products with exclusive member
                            benefits.</p>

                        <div class="auth-features">
                            <div class="auth-feature"><i class="fas fa-tag"></i><span>Exclusive member discounts</span>
                            </div>
                            <div class="auth-feature"><i class="fas fa-bolt"></i><span>Fast checkout experience</span>
                            </div>
                            <div class="auth-feature"><i class="fas fa-map-marker-alt"></i><span>Order tracking &
                                    history</span></div>
                            <div class="auth-feature"><i class="fas fa-star"></i><span>Personalized
                                    recommendations</span></div>
                            <div class="auth-feature"><i class="fas fa-star"></i><span>Easy to Order</span></div>
                        </div>

                        <div class="auth-stats">
                            <div class="auth-stat">
                                <h3>10K+ Active</h3>
                                <p>Customers</p>
                            </div>
                            <div class="auth-stat">
                                <h3>5K+ Variety of</h3>
                                <p>Products</p>
                            </div>
                            <div class="auth-stat">
                                <h3>4.8/5</h3>
                                <p>Rating</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Form Panel -->
                <div class="auth-form-section">
                    <div class="auth-form-container">

                        <div class="auth-header">
                            <h2>Sign In</h2>
                            <p>Welcome back to IndiaKart</p>
                        </div>

                        <!-- Error message from server -->
                        <% if (error) { %>
                            <div class="auth-error-banner">
                                <i class="fas fa-exclamation-circle"></i>
                                <%= error %>
                            </div>
                            <% } %>

                                <!-- Social Login -->
                                <div class="social-auth">
                                    <button class="social-btn google-btn" type="button">
                                        <i class="fab fa-google"></i> <span>Continue with Google</span>
                                    </button>
                                    <button class="social-btn facebook-btn" type="button">
                                        <i class="fab fa-facebook-f"></i> <span>Continue with Facebook</span>
                                    </button>
                                </div>

                                <div class="auth-divider"><span>or sign in with email</span></div>

                                <!-- Login Form -->
                                <form class="auth-form" id="loginForm" action="/login" method="POST" novalidate>

                                    <div class="form-group">
                                        <label for="loginEmail"><i class="fas fa-envelope"></i> Email Address</label>
                                        <input type="email" id="loginEmail" name="email" placeholder="john@example.com"
                                            required autocomplete="email">
                                        <span class="form-error" id="emailError"></span>
                                    </div>

                                    <div class="form-group">
                                        <label for="loginPassword"><i class="fas fa-lock"></i> Password</label>
                                        <div class="password-input-wrapper">
                                            <input type="password" id="loginPassword" name="password"
                                                placeholder="Enter your password" required
                                                autocomplete="current-password">
                                            <button type="button" class="password-toggle" id="togglePassword"
                                                aria-label="Toggle password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <span class="form-error" id="passwordError"></span>
                                    </div>

                                    <div class="form-group login-options">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="rememberMe" name="rememberMe">
                                            <span class="checkbox-custom"></span>
                                            <span class="checkbox-text">Remember me</span>
                                        </label>
                                        <a href="#" class="forgot-password-link">Forgot password?</a>
                                    </div>

                                    <button type="submit" class="btn btn-primary btn-full">
                                        <span>Sign In</span> <i class="fas fa-arrow-right"></i>
                                    </button>

                                </form>

                                <div class="auth-footer">
                                    <p>Don't have an account? <a href="/signup" class="auth-link">Create one</a></p>
                                </div>

                                <div class="secure-notice">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Your data is secure and encrypted</span>
                                </div>

                    </div>
                </div>

            </div>
        </div>
    </section>

    <%- include("partials/footer") %>

        <script>
            // Password toggle
            document.getElementById('togglePassword').addEventListener('click', function () {
                const input = document.getElementById('loginPassword');
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.replace('fa-eye', 'fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.replace('fa-eye-slash', 'fa-eye');
                }
            });

            // Basic client-side validation
            document.getElementById('loginForm').addEventListener('submit', function (e) {
                let valid = true;

                const email = document.getElementById('loginEmail');
                const password = document.getElementById('loginPassword');
                const emailError = document.getElementById('emailError');
                const passwordError = document.getElementById('passwordError');

                emailError.textContent = '';
                passwordError.textContent = '';

                if (!email.value || !email.value.includes('@')) {
                    emailError.textContent = 'Please enter a valid email address.';
                    valid = false;
                }

                if (!password.value || password.value.length < 6) {
                    passwordError.textContent = 'Password must be at least 6 characters.';
                    valid = false;
                }

                if (!valid) e.preventDefault();
            });
        </script>